# matrix

a simple SSL-enabled server/client written in `asyncio` + `ssl`

## Current Project Structure

```plaintext
src/
│
├── ssl/
│   ├── cert.pem
│   ├── key.pem
├── client.py
├── openssl.cnf
├── requirements.txt
└── server.py
```

- **`ssl/`**: Contains the SSL certificate (`cert.pem`) and key (`key.pem`) -- These are generated by the `server.py` script if they do not exist.
- **`client.py`**: asyncio-based client.
- **`openssl.cnf`**: Configuration file for OpenSSL, used during the generation of the SSL certificate.
- **`requirements.txt`**: List of all the dependencies required for the project.
- **`server.py`**: Server code that handles client connections, issues JWT tokens, and verifies them.

## Install Dependencies:

   ```bash
   pip install -r requirements.txt
   ```

### Requirements

- Python 3.8+
- The following Python libraries (installed via `requirements.txt`):
  - `asyncio`
  - `ssl`
  - `os`
  - `subprocess`
  - `pyjwt`

## Usage

### Server

To start the server, run:

```bash
python server.py
```


### Client

To start the client, run:

```bash
python client.py
```

The client will connect to the server over SSL, receive a JWT token, and then send messages to the server. The server will verify the JWT token with each message.

## Process


### SSL Certificate

If no SSL certificate and key are found in the `ssl/` directory, the server will generate them automatically using the OpenSSL configuration specified in `openssl.cnf`.

### JWT Token

Each client is issued a JWT token upon connection, which is valid for 1 hour. The token is verified with each communication. If the token expires, the client will be informed.

